---
description: Use when analyzing React architecture, component hierarchies, state management, or UI/UX implementations for web-based card game
---

# === USER INSTRUCTIONS ===
- Game Layout: `frontend-next/src/components/game/GameInterface.tsx`
- Faction-Based Theming: `frontend-next/src/context/FactionThemesContext.tsx`
- Card Management: `frontend-next/src/features/cards/CardHand.tsx`
- Battlefield Grid: `frontend-next/src/features/battlefield/Battlefield.tsx`
- Resource Display: `frontend-next/src/features/players/PlayerHUD.tsx` 
- Faction Selection: `frontend-next/src/components/factions/FactionGrid.tsx`
- Turn Manager: `frontend-next/src/features/battlefield/TurnManager.tsx`
# === END USER INSTRUCTIONS ===

# frontend-architecture

### Component Hierarchy

1. **Game Core Components**
- Root game provider managing global state and faction themes
- Battle system components for tactical grid-based gameplay 
- Resource management system tracking Energy, Momentum, and Health
- Turn phase controller managing Draw, Energy, Main, Combat, End phases
  - GameInterface emits phase changes; TurnManager controls sequencing
  - CardHand derives playable state from current phase and resources
  - PlayerHUD subscribes to resource updates and action outcomes
  
2. **Deck Building System** 
Importance Score: 95
```
DeckBuilder/
  ├── DeckStats (cost curve, faction balance)
  ├── DeckList (card organization) 
  ├── CardCollection (available cards)
  └── CardFilters (faction/type/cost filters)
```

3. **Faction System Components**
Importance Score: 90
```
Factions/
  ├── FactionGrid (hexagonal layout)
  ├── FactionCard (individual display)
  ├── ConnectionLines (faction relationships)
  └── MoodBoard (faction themes/aesthetics)
```

GameInterface/
  ├── Battlefield (tactical grid)
  ├── PlayerHUD (resources/stats)
  ├── CardHand (held cards)
  └── TurnManager (phase control)

Dataflow:
 - GameInterface -> PlayerHUD: resource and status updates
 - CardHand -> TurnManager: play requests validated vs energy/momentum
 - TurnManager -> CardHand: phase transitions affect playable cards
 - Battlefield <-> PlayerHUD: unit placements update control zones and HUD

### State Management

1. **Game State** 
Importance Score: 90
- Manages turn phases, resources, card states
- Handles battlefield unit positions and effects
- Tracks faction-specific mechanics and abilities
- Controls game flow and win conditions

2. **Deck Building State**
Importance Score: 85  
- Validates deck composition rules
- Tracks faction limitations
- Manages card collection and filters
- Provides deck statistics and recommendations

3. **Faction Portal State**
Importance Score: 80
- Controls faction theme switching
- Manages faction relationship displays
- Handles timeline and program progression
- Tracks technological synthesis state

### UI/UX Implementation

1. **Holographic Interface System**
Importance Score: 85
2. **Card Interaction System**
Importance Score: 80
- Drag and drop card placement (standardize on dnd-kit)
- Targeting system for abilities
- Resource cost validation
- Card preview and detail display
- Input support: mouse, touch, keyboard (focus + ARIA)
- Hit-testing: grid cell snapping and valid-target highlighting rules
- Drag and drop card placement
- Targeting system for abilities
- Resource cost validation
- Card preview and detail display
